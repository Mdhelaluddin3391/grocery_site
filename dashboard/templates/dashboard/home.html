{% extends 'dashboard/base_dashboard.html' %}

{% block content %}
<div class="grid grid-cols-2 md:grid-cols-4 xl:grid-cols-7 gap-5 mb-8">
    <div class="bg-white p-5 rounded-lg shadow"><h4 class="text-gray-500 font-medium">Today’s Orders</h4><p class="text-3xl font-bold text-gray-800 mt-2">1,245 <span class="text-sm text-green-500 font-semibold">(+12%)</span></p></div>
    <div class="bg-white p-5 rounded-lg shadow"><h4 class="text-gray-500 font-medium">Avg Delivery Time</h4><p class="text-3xl font-bold text-gray-800 mt-2">11.4 <span class="text-sm">min</span> <span class="text-green-500">⬇️</span></p></div>
    <div class="bg-white p-5 rounded-lg shadow"><h4 class="text-gray-500 font-medium">On-Time %</h4><p class="text-3xl font-bold text-green-600 mt-2">96.3% <span class="text-green-500">✅</span></p></div>
    <div class="bg-white p-5 rounded-lg shadow"><h4 class="text-gray-500 font-medium">AOV</h4><p class="text-3xl font-bold text-gray-800 mt-2">₹285</p></div>
    <div class="bg-white p-5 rounded-lg shadow"><h4 class="text-gray-500 font-medium">Active Riders</h4><p class="text-3xl font-bold text-gray-800 mt-2">42</p></div>
    <div class="bg-white p-5 rounded-lg shadow"><h4 class="text-gray-500 font-medium">Dark Stores Online</h4><p class="text-3xl font-bold text-gray-800 mt-2">8<span class="text-lg text-gray-500">/10</span></p></div>
    <div class="bg-blue-600 text-white p-5 rounded-lg shadow"><h4 class="font-medium">Live Orders</h4><p class="text-3xl font-bold mt-2">87</p><a href="#" class="text-sm hover:underline">View Kanban →</a></div>
</div>

<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    
    <div class="lg:col-span-2 space-y-8">
        <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="text-lg font-semibold mb-4">Orders per Hour</h3>
            <canvas id="ordersPerHourChart"></canvas>
        </div>
        <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="text-lg font-semibold mb-4">Top Selling Items</h3>
            <canvas id="topItemsChart"></canvas>
        </div>
    </div>

    <div class="space-y-8">
        <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="text-lg font-semibold mb-4">Dark Store View: Andheri West</h3>
            <div class="space-y-3 text-sm">
                <p><strong>Stock Filled:</strong> <span class="font-bold text-green-600">87%</span></p>
                <div class="space-y-2">
                    <p>Milk: 45/50</p>
                    <p class="text-red-600 font-semibold">Bread: 12/30 ⚠️ Low Stock</p>
                    <p>Eggs: 60/100</p>
                </div>
                <button class="w-full mt-3 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-semibold">Restock Now</button>
            </div>
        </div>
        <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="text-lg font-semibold mb-4">High Demand Areas</h3>
            <div class="bg-gray-200 h-64 rounded-md flex items-center justify-center">
                <p class="text-gray-500">[Google Map Heatmap Placeholder]</p>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // Orders Per Hour Chart
    const ctxOrders = document.getElementById('ordersPerHourChart').getContext('2d');
    new Chart(ctxOrders, {
        type: 'line',
        data: {
            labels: ['12am', '3am', '6am', '9am', '12pm', '3pm', '6pm', '9pm'],
            datasets: [{
                label: 'Orders',
                data: [12, 19, 3, 5, 25, 80, 120, 150],
                borderColor: 'rgb(59, 130, 246)',
                tension: 0.1,
                fill: false
            }]
        }
    });

    // Top Selling Items Chart
    const ctxItems = document.getElementById('topItemsChart').getContext('2d');
    new Chart(ctxItems, {
        type: 'bar',
        data: {
            labels: ['Milk', 'Bread', 'Eggs', 'Apples', 'Chicken'],
            datasets: [{
                label: '# of Sales',
                data: [190, 152, 120, 98, 75],
                backgroundColor: 'rgba(34, 197, 94, 0.6)',
                borderColor: 'rgba(22, 163, 74, 1)',
                borderWidth: 1
            }]
        },
        options: { indexAxis: 'y' }
    });
});
</script>
{% endblock content %}