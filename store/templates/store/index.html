{% extends 'store/base.html' %}
{% load static %}

{% block title %}QuickDash - Home{% endblock title %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'store/css/index.css' %}?v=1.1">
{% endblock extra_css %}

{% block content %}

<section>
    <div class="section-header">
        <h2>Kepto Specials</h2>
        <a href="#">See All Offers</a>
    </div>
    <div class="scroll-banner">
        {% for product in specials %}
        <a href="{% url 'product_detail' product.slug %}" class="promo-card">
            <div class="promo-content">
                <h3>{{ product.name }}</h3>
                <p>₹{{ product.price }}</p>
            </div>
            <img class="promo-image" src="{{ product.image.url|default:'https://via.placeholder.com/150' }}" alt="{{ product.name }}">
        </a>
        {% empty %}
        <p>No special offers right now.</p>
        {% endfor %}
    </div>
</section>

<section>
    <div class="section-header">
        <h2>Shop By Category</h2>
        <a href="#">View All</a>
    </div>
    <div class="category-grid">
        {% for cat in categories %}
        <a href="{% url 'category_detail' cat.slug %}" class="category">
            <div class="category-icon">
                <img src="{{ cat.icon.url|default:'https://via.placeholder.com/80' }}" alt="{{ cat.name }}">
            </div>
            <span class="category-name">{{ cat.name }}</span>
        </a>
        {% empty %}
        <p>No categories available.</p>
        {% endfor %}
    </div>
</section>

{% for category in categories %}
<section>
    <div class="section-header">
        <h2>{{ category.name }}</h2>
        <a href="{% url 'category_detail' category.slug %}">More</a>
    </div>
    <div class="scroll-container">
        <div class="product-grid">
            
            {% for product in category.limited_products %}
            <div class="product">
                <a href="{% url 'product_detail' product.slug %}">
                    <img src="{{ product.image.url|default:'https://via.placeholder.com/150' }}" alt="{{ product.name }}">
                </a>
                <h4>{{ product.name }}</h4>
                <p>{{ product.description|default:"" }}</p>
                <div class="price">
                    {% if product.old_price %}
                        <span class="old-price">₹{{ product.old_price }}</span>
                    {% endif %}
                    <span>₹{{ product.price }}</span>
                    <button class="add-btn" data-product-id="{{ product.id }}">ADD</button>
                </div>
            </div>
            {% empty %}
            <p>No products in this category.</p>
            {% endfor %}
            </div>
    </div>
</section>
{% endfor %}

{% endblock content %}