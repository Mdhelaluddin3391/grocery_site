{% extends 'store/base.html' %}
{% load static %}

{% block title %}QuickDash - Home{% endblock title %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'store/css/index.css' %}?v=1.1">
{% endblock extra_css %}

{% block content %}

<section>
    <div class="section-header">
        <h2>Kepto Specials</h2>
        <a href="#">See All Offers</a>
    </div>
    <div class="scroll-banner">
        {% for product in specials %}
        <a href="{% url 'product_detail' product.slug %}" class="promo-card">
            <div class="promo-content">
                <h3>{{ product.name }}</h3>
                <p>â‚¹{{ product.price }}</p>
            </div>
            <img class="promo-image" src="{{ product.image.url|default:'https://via.placeholder.com/150' }}" alt="{{ product.name }}">
        </a>
        {% empty %}
        <p>No special offers right now.</p>
        {% endfor %}
    </div>
</section>

<section>
    <div class="section-header">
        <h2>Shop By Category</h2>
        <a href="#">View All</a>
    </div>
    <div class="category-grid">
        {% for cat in main_categories %}  <a href="{% url 'category_detail' cat.slug %}" class="category">
            <div class="category-icon">
                <img src="{{ cat.icon.url|default:'https://via.placeholder.com/80' }}" alt="{{ cat.name }}">
            </div>
            <span class="category-name">{{ cat.name }}</span>
        </a>
        {% empty %}
        <p>No categories available.</p>
        {% endfor %}
    </div>
</section>

<div id="category-container" data-has-more="{{ has_more_pages|yesno:'true,false' }}">
    {% include 'store/partials/_category_section.html' with categories=categories %}
</div>

<div id="load-more-trigger" style="height: 50px;">
    <p class="loading-text" style="display: none;">Loading...</p>
</div>

<div id="end-of-list-message" style="display: none; text-align: center; padding: 40px 20px;">
    <img src="https://cdn-icons-png.flaticon.com/512/954/954591.png" alt="Search" style="width: 50px; height: 50px; margin-bottom: 15px; opacity: 0.7;">
    <h3 style="font-size: 1.5rem; font-weight: 700; color: #2c3e50; margin-bottom: 5px;">Looking for something specific?</h3>
    <p style="font-size: 1rem; color: #7f8c8d;">
        Use the search bar at the top to find exactly what you need, instantly!
    </p>
</div>

{% endblock content %}